name: Pre-release Validation

on:
  push:
    branches: [ develop_v1 ]
  pull_request:
    branches: [ develop_v1 ]

jobs:
  pre-release-checks:
    runs-on: ubuntu-latest

    steps:
    - name: üì• Checkout repository
      uses: actions/checkout@v3

    - name: üö´ Check for capitalized folders or files
      run: |        
        echo "Running file/folder naming validation..."

        # Get all tracked files with capital letters (excluding README.md)
        capital_files=$(git ls-files | grep -E '/[A-Z]' | grep -v 'README.md' || true)
        capital_root_files=$(git ls-files | grep -E '^[A-Z]' | grep -v '^README.md$' || true)
        
        if [ ! -z "$capital_files" ] || [ ! -z "$capital_root_files" ]; then
          echo "‚ùå ERROR: The following files or folders start with a capital letter (excluding README.md):"
          echo "$capital_files"
          echo "$capital_root_files"
          echo "Please rename them to follow lowercase naming conventions."
          exit 1
        fi

    - name: ‚úÖ Success
      run: echo "All pre-release checks passed!"
